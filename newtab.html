<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="color-scheme" content="light dark">
  <title>Katahari Quotes</title>
  <link rel="stylesheet" href="./css/main.css">
</head>
<body>
  <canvas id="stars" aria-hidden="true"></canvas>

  <div class="main" role="main">
    <header class="header" role="banner" aria-label="Top bar">
      <div class="header-inner">
        <div class="logo" role="img" aria-label="Katahari Quotes">
          <!-- Brand mark now uses proper img tag for better accessibility -->
          <img src="brand-logo.png" style="width: 30px; height: 30px;" alt="Katahari brand icon" />
          <h1 class="brand" style="margin-left:-7px">atahari</h1>
          <span class="brand-sub">quotes</span>
        </div>

        <nav class="controls" role="navigation" aria-label="Top controls">
          <!-- Language -->
          <button id="button-language" class="btn btn-ghost" aria-pressed="false" aria-label="Switch language" title="Switch language">🇬🇧 EN</button>

          <!-- Themes (opens quick theme panel) -->
          <button id="button-themes" class="btn btn-ghost" aria-label="Open themes" title="Open themes">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <path d="M12 3a9 9 0 100 18 9 9 0 000-18z"/>
            </svg>
            <span style="margin-left:8px;vertical-align:middle">Themes</span>
          </button>

          <!-- Sources (opens sources panel) -->
          <button id="button-sources" class="btn btn-ghost" aria-label="Open quote sources" title="Open quote sources">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M3 6h18M3 12h18M3 18h18"/></svg>
            <span style="margin-left:8px;vertical-align:middle">Sources</span>
          </button>

          <!-- Light/Dark toggle -->
          <button id="button-theme" class="btn btn-ghost katahari-theme" aria-pressed="false" aria-label="Toggle light/dark" title="Toggle theme">Light</button>

          <!-- Donate -->
          <button id="button-donate" class="btn btn-primary" aria-label="Support development" title="Support development">☕ Donate</button>

          <!-- Socials -->
          <div class="socials" style="display:flex;gap:6px;margin-left:6px;align-items:center">
            <a class="btn btn-ghost btn-icon" href="mailto:ahmadyudafahrudin@gmail.com" aria-label="Email" title="Email">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M4 6.5h16a1.5 1.5 0 0 1 1.5 1.5v8a1.5 1.5 0 0 1-1.5 1.5H4a1.5 1.5 0 0 1-1.5-1.5v-8A1.5 1.5 0 0 1 4 6.5z"></path><path d="M4.5 8.5l7.5 4.5 7.5-4.5"></path></svg>
            </a>
            <a class="btn btn-ghost btn-icon" href="https://github.com/yudafhd/katahari" target="_blank" rel="noopener" aria-label="GitHub" title="GitHub">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M12 .5a11.5 11.5 0 0 0-3.63 22.45c.57.1.78-.25.78-.55v-2.04c-3.18.69-3.85-1.53-3.85-1.53-.52-1.32-1.27-1.67-1.27-1.67-1.04-.71.08-.7.08-.7 1.15.08 1.76 1.18 1.76 1.18 1.02 1.75 2.67 1.25 3.33.96.1-.74.4-1.25.73-1.54-2.54-.29-5.21-1.27-5.21-5.66 0-1.25.45-2.27 1.18-3.07-.12-.29-.51-1.45.11-3.02 0 0 .96-.31 3.15 1.17a10.9 10.9 0 0 1 5.73 0c2.19-1.48 3.15-1.17 3.15-1.17.62 1.57.23 2.73.11 3.02.73.8 1.18 1.82 1.18 3.07 0 4.4-2.68 5.36-5.24 5.64.41.36.77 1.08.77 2.18v3.24c0 .3.21.66.79.55A11.5 11.5 0 0 0 12 .5z"/></svg>
            </a>
            <a class="btn btn-icon" href="https://katahari-web.vercel.app" target="_blank" rel="noopener" aria-label="Katahari Web" title="Katahari Web">
              try katahari web
            </a>
          </div>
        </nav>
      </div>
    </header>

    <main class="content" id="content" role="main" aria-describedby="page-tagline">

      <!-- Quote card -->
      <article role="article" aria-live="polite" aria-atomic="true">
        <blockquote>
          <p id="blockquote" class="blockquote"></p>
          <footer>
            <cite id="cite"></cite>
          </footer>
        </blockquote>

        <!-- Clear, spaced controls -->
        <div class="quote-actions" role="group" aria-label="Quote actions">
          <button id="btn-prev" class="btn btn-ghost btn-previous" aria-label="Previous quote" title="Previous (←)">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <path d="M15 18l-6-6 6-6"></path>
            </svg>
          </button>

          <!-- Make Random visually primary without changing classes -->
          <button id="btn-random" class="btn btn-ghost btn-random" aria-label="Random quote" title="Random (•)">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <path d="M3 6h6l3 8 4-16h5"></path>
              <path d="M16 18a2 2 0 1 0 0-4 2 2 0 0 0 0 4zM8 8.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z" />
            </svg>
            <span style="margin-left:8px;font-weight:700;">Inspire me</span>
          </button>

          <button id="btn-next" class="btn btn-ghost btn-next" aria-label="Next quote" title="Next (→)">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <path d="M9 18l6-6-6-6"></path>
            </svg>
          </button>

          <div class="spacer" aria-hidden="true"></div>

          <button id="btn-copy" class="btn btn-ghost btn-copy" aria-label="Copy quote" title="Copy">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
              <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
            </svg>
            <span style="margin-left:6px;">Copy</span>
          </button>

          <button id="btn-share" class="btn btn-ghost btn-share" aria-label="Share quote" title="Share">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <circle cx="18" cy="5" r="3"></circle>
              <circle cx="6" cy="12" r="3"></circle>
              <circle cx="18" cy="19" r="3"></circle>
              <path d="M8.6 10.6l6.8-4.2"></path>
              <path d="M8.6 13.4l6.8 4.2"></path>
            </svg>
            <span style="margin-left:6px;">Share</span>
          </button>
        </div>
      </article>
    </main>

    <!-- Panels: designed to reuse .theme-content styles and stay hidden by default.
         If your runtime toggles the "hidden" class, these become interactive without extra JS. -->

    <!-- Theme picker -->
    <section id="theme-content" class="theme-content hidden" role="dialog" aria-modal="true" aria-labelledby="themes-title">
      <div style="width:100%;">
        <div style="display:flex; align-items:center; justify-content:space-between; gap: .5rem; margin-bottom: .75rem;">
          <h2 id="themes-title" style="margin:0; font-size:1.1rem;">Quick themes</h2>
          <button class="btn btn-ghost btn-close" aria-label="Close themes" title="Close">✕</button>
        </div>
        <p style="margin:0 0 .75rem 0; color:var(--muted);">Pick a vibe. Your choice is remembered.</p>
        <div class="theme-grid">
          <button class="theme-item" data-theme="default">Default</button>
          <button class="theme-item" data-theme="midnight">Midnight</button>
          <button class="theme-item" data-theme="aurora">Aurora</button>
          <button class="theme-item" data-theme="sunset">Sunset</button>
          <button class="theme-item" data-theme="forest">Forest</button>
          <button class="theme-item" data-theme="sakura">Sakura</button>
        </div>
      </div>
    </section>

    <!-- Sources panel -->
    <section id="sources-content" class="theme-content hidden" role="dialog" aria-modal="true" aria-labelledby="sources-title" aria-describedby="sources-desc">
      <div style="width:100%;">
        <div style="display:flex; align-items:center; justify-content:space-between; gap: .5rem; margin-bottom: .75rem;">
          <h2 id="sources-title" style="margin:0; font-size:1.1rem;">Quote sources</h2>
          <button class="btn btn-ghost btn-close" aria-label="Close sources" title="Close">✕</button>
        </div>
        <p id="sources-desc" style="margin:0 0 .75rem 0; color:var(--muted);">Curated from books, movies, games, anime, and more.</p>
        <ul style="margin:0; padding-left:1.1rem; line-height:1.6;">
          <li>Books & literature</li>
          <li>Movies & series</li>
          <li>Games</li>
          <li>Anime & manga</li>
          <li>General inspiration</li>
        </ul>
        <p style="margin:.8rem 0 0 0;">
          Browse and contribute on GitHub:
          <a href="https://github.com/yudafhd/katahari" target="_blank" rel="noopener">yudafhd/katahari</a>
        </p>
      </div>
    </section>

    <!-- Donate panel -->
    <section id="donate-content" class="theme-content hidden" role="dialog" aria-modal="true" aria-labelledby="donate-title" aria-describedby="donate-desc">
      <div style="width:100%;">
        <div style="display:flex; align-items:center; justify-content:space-between; gap: .5rem; margin-bottom: .75rem;">
          <h2 id="donate-title" style="margin:0; font-size:1.1rem;">Support development</h2>
          <button class="btn btn-ghost btn-close" aria-label="Close donate" title="Close">✕</button>
        </div>
        <p id="donate-desc" style="margin:0 0 .75rem 0; color:var(--muted);">
          If this little extension brightens your day, consider buying a coffee. Thank you!
        </p>
        <div style="display:flex; gap:.75rem; align-items:flex-start; justify-content:center; flex-wrap:wrap;">
          <figure style="margin:0;">
            <img src="./qris.jpeg" alt="QRIS donation code" style="width:220px; height:auto; border-radius:12px; border:1px solid var(--border);" />
            <figcaption style="text-align:center; color:var(--muted); font-size:.9rem; margin-top:.4rem;">QRIS (ID)</figcaption>
          </figure>
          <figure style="margin:0;">
            <img src="./qrcode.png" alt="QR donation code" style="width:220px; height:auto; border-radius:12px; border:1px solid var(--border);" />
            <figcaption style="text-align:center; color:var(--muted); font-size:.9rem; margin-top:.4rem;">Global</figcaption>
          </figure>
        </div>
      </div>
    </section>
  </div>

  <!-- Theme logic moved to vendor/main.js to avoid duplicate handlers -->

  <script type="module" src="./vendor/main.js"></script>
  <script type="module" src="./vendor/chromeStorageHelper.js"></script>
  <script type="module" src="./vendor/star.js"></script>
</body>
</html>